environment:
  REQUIRE_SINGLE: true
  matrix:
    - nodejs_version: "16.14.0"
      TARGET: test
    - nodejs_version: "16.14.0"
      TARGET: stress
    - nodejs_version: "16.14.0"
      TARGET: multi
    - nodejs_version: "14.19.0"
      TARGET: test
    - nodejs_version: "14.19.0"
      TARGET: stress
    - nodejs_version: "14.19.0"
      TARGET: multi
    - nodejs_version: "12.22.10"
      TARGET: test
    - nodejs_version: "12.22.10"
      TARGET: stress
    - nodejs_version: "12.22.10"
      TARGET: multi

install:
  - ps: Remove-NodeJsInstallation $(Get-InstalledNodeJsVersion).version $(Get-InstalledNodeJsVersion).bitness
  - ps: cmd /c start /wait msiexec /i $(Get-NodeJsInstallPackage $env:nodejs_version x64) /q
  - node --version
  - npm --version
  - npm install

test_script:
  - npm run %TARGET%

build: off
